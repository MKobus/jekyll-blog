<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>CSS and JavaScript Resizing Based on Window Width: Let's play nice &#8211; Musings of a Developer</title>
<meta name="description" content="Looking back on this issue, there probably was a simpler way to do this.

">
<meta name="keywords" content="">



<!-- Twitter Cards -->
<meta name="twitter:title" content="CSS and JavaScript Resizing Based on Window Width: Let's play nice">
<meta name="twitter:description" content="Looking back on this issue, there probably was a simpler way to do this.

">



<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="/images/site-logo.png">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="CSS and JavaScript Resizing Based on Window Width: Let's play nice">
<meta property="og:description" content="Looking back on this issue, there probably was a simpler way to do this.

">
<meta property="og:url" content="/articles/javascript/css/css-and-javascript-resizing/">
<meta property="og:site_name" content="Musings of a Developer">





<link rel="canonical" href="/articles/javascript/css/css-and-javascript-resizing/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Musings of a Developer Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<!-- Webfonts -->
<script src="//use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
  <script src="/assets/js/vendor/html5shiv.min.js"></script>
  <script src="/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body id="post">

<div class="navigation-wrapper">
	<nav role="navigation" id="site-nav" class="animated drop">
	    <ul>
      
		    
		        
		    
		    <li><a href="/about/" >About</a></li>
		  
		    
		        
		    
		    <li><a href="/articles/" >Articles</a></li>
		  
		    
		        
		    
		    <li><a href="/blog/" >Blog</a></li>
		  
        <li class="dosearch"><i class="fa fa-search"></i> Search</li>
	    </ul>
	</nav>
</div><!-- /.navigation-wrapper -->

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->

<div class="search-wrapper">
  <div class="search-form">
    <input type="text" class="search-field" placeholder="Search...">
    <button class="close-btn"><i class="fa fa-times-circle fa-2x"></i></button>
    <ul class="search-results post-list"></ul><!-- /.search-results -->
  </div><!-- /.search-form -->
</div><!-- ./search-wrapper -->

<header class="masthead">
	<div class="wrap">
        
    		<a href="/" class="site-logo" rel="home" title="Musings of a Developer"><h1 class="masthead_logo animated bounceInDown">{ MMK }</h1></a>
        
        <h1 class="site-title animated fadeIn"><a href="/">Musings of a Developer</a></h1>
		<h2 class="site-description animated fadeIn" itemprop="description">Thoughts, ideas, rants, useful tech stuff.</h2>
	</div>
</header><!-- /.masthead -->


<div id="main" role="main">
  <article class="hentry">
    
    <div class="entry-wrapper">
      <header class="entry-header">
        <span class="entry-tags"></span>
        
          <h1 class="entry-title">CSS and JavaScript Resizing Based on Window Width: Let's play nice</h1>
        
      </header>
      <footer class="entry-meta">
        <!-- 
        
        
          <img src="/images/martha.jpg" class="bio-photo" alt="Martha Kobus bio photo"></a>
        
        <span class="author vcard">By <span class="fn">Martha Kobus</span></span>-->
        <span class="entry-date date published"><time datetime="2014-08-06T08:41:16-04:00"><i class="icon-calendar-empty"></i> August 06, 2014</time></span>
        
        
        
        <div class="google-ads" style="margin-top:40px; text-align:center;">
  <script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- 160x600 ad -->
  <ins class="adsbygoogle"
       style="display:inline-block;width:160px;height:600px"
       data-ad-client=""
       data-ad-slot=""></ins>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div><!-- /.google-ads --><!-- /.google-ads -->
      </footer>
      <div class="entry-content">
        <h3 id="looking-back-on-this-issue-there-probably-was-a-simpler-way-to-do-this">Looking back on this issue, there probably was a simpler way to do this.</h3>

<p>I could have made this all CSS. I could have made this all JavaScript. But, there were other factors that prohibited me from messing around with this inherited code too much. We had a deadline and a limited amount of hours. That’s what happens when you have clients. And when you’re hard pressed for time and looking at the code for the very first time, you kind of just wing it.</p>

<p>I do however think this was elegant enough. So I will post it.</p>

<h3 id="to-explain-the-issue">To explain the issue:</h3>
<p>The client wanted to have a video implemented on their website. It had to be a popover, and it was embedded with Vimeo. All fantastic, and as it is a responsive site, my job was to make sure the video did just that, respond to the browser size.</p>

<p>I <em>originally</em> thought I had it figured out. I had a modal (handmade because the guy who previously made the site, did it responsive by hand, no bootstrap), and I had the video embedded in the modal. And I had CSS media queries setting the width of the video container.</p>

<div class="highlight"><pre><code class="language-sass" data-lang="sass"><span class="nc">.video_container_inner</span> <span class="err">{</span>
                <span class="na">padding-top</span><span class="o">:</span> <span class="mi">15</span><span class="kt">px</span><span class="err">;</span>
                <span class="k">@media</span> <span class="nt">screen</span> <span class="nt">and</span> <span class="o">(</span><span class="nt">min-width</span><span class="nd">:</span> <span class="nt">1200px</span><span class="o">)</span> <span class="err">{</span>
                    <span class="na">width</span><span class="o">:</span> <span class="mi">800</span><span class="kt">px</span><span class="err">;</span>
                <span class="err">}</span>
                <span class="k">@media</span> <span class="nt">screen</span> <span class="nt">and</span> <span class="o">(</span><span class="nt">max-width</span><span class="nd">:</span> <span class="nt">1199px</span><span class="o">)</span> <span class="err">{</span>
                    <span class="na">width</span><span class="o">:</span> <span class="mi">640</span><span class="kt">px</span><span class="err">;</span>
                <span class="err">}</span>
                <span class="k">@media</span> <span class="nt">screen</span> <span class="nt">and</span> <span class="o">(</span><span class="nt">max-width</span><span class="nd">:</span> <span class="nt">959px</span><span class="o">)</span> <span class="err">{</span>
                    <span class="na">width</span><span class="o">:</span> <span class="mi">500</span><span class="kt">px</span><span class="err">;</span>
                <span class="err">}</span>
                <span class="k">@media</span> <span class="nt">screen</span> <span class="nt">and</span> <span class="o">(</span><span class="nt">max-width</span><span class="nd">:</span> <span class="nt">639px</span><span class="o">)</span> <span class="err">{</span>
                    <span class="na">width</span><span class="o">:</span> <span class="mi">320</span><span class="kt">px</span><span class="err">;</span>
                <span class="err">}</span>
                <span class="nn">#ek_video</span> <span class="err">{}</span>
            <span class="err">}</span></code></pre></div>

<p>Did that, fantastic. Come to find out, a lot of video hosters don’t really provide you with a responsive video (facepalm). So I had to go and write that one up too. Here, jQuery comes galloping in, my white knight! And we used:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">width</span><span class="p">();</span></code></pre></div>

<h3 id="let-me-tell-you-right-now">Let me tell you right now</h3>
<p>Do not attempt to use this. Just don’t. May work all fine and dandy in your fancy Mac in all the browsers. I think it even worked in IE (don’t remember). But it did not work in Windowz 7 Chrome.</p>

<p>And why is that you ask?</p>

<p>Because:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">width</span><span class="p">();</span></code></pre></div>

<p>or</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">innerWidth</span><span class="p">();</span></code></pre></div>

<p>are not equal to</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span></code></pre></div>

<h3 id="your-css-media-queries-are-based-on-window-width">Your CSS media queries are based on window width</h3>
<p>Webkit does not include the scrollbars as part of the width, but Firefox, Opera and IE do.</p>

<p>What I thought was a beautifully functioning $(window).width(); query for the iframe player, was actually terrible in a certain version of Chrome. The reason is that although the developer tools were saying the width of the window was 1200px, $(window).width(); was showing a value 15px (or so) less. Obviously this was an issue, since the queries between CSS and JavaScript were not operating at the same time, causing the video the jump all over the page instead of sitting snuggle within</p>

<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;video_container_inner&quot;</span><span class="nt">&gt;&lt;/div&gt;</span></code></pre></div>

<h3 id="scrollbars-are-evil-and-standards-are-unicorns">Scrollbars are evil and Standards are Unicorns</h3>
<p>This wouldn’t be an issue if every browser treated Scrollbars equally, but as we know, standards are unicorns and that would make it too easy.</p>

<p>To fix this, I found a good little snippet on the web to get the actual width of the window:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">getWindowWidth</span><span class="p">()</span> <span class="p">{</span>
		<span class="nx">windowWidth</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;number&#39;</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">windowWidth</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">else</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span> <span class="o">&amp;&amp;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">clientWidth</span><span class="p">)</span> <span class="p">{</span>
				<span class="nx">windowWidth</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">clientWidth</span><span class="p">;</span>
			<span class="p">}</span>
			<span class="k">else</span> <span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">clientWidth</span><span class="p">)</span> <span class="p">{</span>
					<span class="nx">windowWidth</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">clientWidth</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span></code></pre></div>

<p>This gets the same exact value as your CSS at the same exact time. Note that this no longer uses the jQuery knight who had come galloping in. It’s plain JavaScript using window.innerWidth. This operates much differently and grabs the <em>right</em> values. TADA!</p>

<p>So when I plugged it in to this:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">resizePlayer</span><span class="p">(){</span>
	<span class="nx">getWindowWidth</span><span class="p">();</span>
	<span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#ek_video&quot;</span><span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">){</span>
		<span class="k">if</span><span class="p">(</span><span class="nx">windowWidth</span> <span class="o">&gt;=</span> <span class="mi">1200</span><span class="p">){</span>
			<span class="nx">v_width</span> <span class="o">=</span> <span class="mi">800</span><span class="p">;</span>
			<span class="nx">v_height</span> <span class="o">=</span> <span class="mi">488</span><span class="p">;</span>
		<span class="p">}</span><span class="k">if</span><span class="p">(</span><span class="nx">windowWidth</span> <span class="o">&gt;</span> <span class="mi">960</span> <span class="o">&amp;&amp;</span> <span class="nx">windowWidth</span> <span class="o">&lt;</span> <span class="mi">1200</span><span class="p">){</span>
			<span class="nx">v_width</span> <span class="o">=</span> <span class="mi">640</span><span class="p">;</span>
			<span class="nx">v_height</span> <span class="o">=</span> <span class="mi">390</span><span class="p">;</span>
		<span class="p">}</span><span class="k">if</span><span class="p">(</span><span class="nx">windowWidth</span> <span class="o">&gt;</span> <span class="mi">640</span> <span class="o">&amp;&amp;</span> <span class="nx">windowWidth</span> <span class="o">&lt;</span> <span class="mi">960</span><span class="p">){</span>
			<span class="nx">v_width</span> <span class="o">=</span> <span class="mi">500</span><span class="p">;</span>
			<span class="nx">v_height</span> <span class="o">=</span> <span class="mi">305</span><span class="p">;</span>
		<span class="p">}</span><span class="k">if</span><span class="p">(</span><span class="nx">windowWidth</span> <span class="o">&lt;</span> <span class="mi">640</span><span class="p">){</span>
			<span class="nx">v_width</span> <span class="o">=</span> <span class="mi">320</span><span class="p">;</span>
			<span class="nx">v_height</span> <span class="o">=</span> <span class="mi">195</span><span class="p">;</span>
		<span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">windowWidth</span> <span class="o">&lt;</span> <span class="mi">400</span><span class="p">){</span>
			<span class="nx">v_width</span> <span class="o">=</span> <span class="mi">300</span><span class="p">;</span>
			<span class="nx">v_height</span> <span class="o">=</span> <span class="mi">195</span><span class="p">;</span>
		<span class="p">}</span>

		<span class="nx">$</span><span class="p">(</span><span class="s2">&quot;iframe&quot;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="nx">v_width</span><span class="p">);</span>
		<span class="nx">$</span><span class="p">(</span><span class="s2">&quot;iframe&quot;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="nx">v_height</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span></code></pre></div>

<p>my video was working right! No issues, no bugs, and the queries firing off at the same time.</p>

<p>The end.</p>


        <nav class="pagination" role="navigation">
          
            <a href="/articles/web-development/google-maps-api-integration/" class="btn" title="Google Maps API Integration">Previous</a>
          
          
            <a href="/articles/css/sass/CSS-Utilities/" class="btn" title="CSS Utilities: Making Code Easier to Deal With">Next</a>
          
        </nav><!-- /.pagination -->
        
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    

<span>&copy; 2014 Martha Kobus. Powered by <a href="http://jekyllrb.com">Jekyll</a> using a manipulated <a href="http://mademistakes.com/so-simple/">So Simple Theme</a>.</span>
<div class="social-icons">
	
	
	
	<a href="https://www.linkedin.com/pub/martha-kobus/7a/413/491" title="Martha Kobus on LinkedIn" target="_blank"><i class="fa fa-linkedin-square fa-2x"></i></a>
	
	
	
	<a href="http://github.com/mkobus" title="Martha Kobus on Github" target="_blank"><i class="fa fa-github-square fa-2x"></i></a>
	
	<a href="mailto:marthakobus@gmail.com"><i class="fa fa-envelope fa-2x"></i></a>
  <a href="/feed.xml" title="Atom/RSS feed"><i class="fa fa-rss-square fa-2x"></i></a>
</div><!-- /.social-icons -->
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>

<!-- Jekyll Simple Search option -->
<script>
  $(document).ready(function() {
      $('.search-field').simpleJekyllSearch({
          jsonFile : '/search.json',
          searchResults : '.search-results',
          template : '<li><article><a href="{url}">{title} <span class="entry-date"><time datetime="{date}">{shortdate}</time></span></a></article></li>',
          noResults: '<p>Nothing found.</p>'
        });
  });

  (function( $, window, undefined ) {
    
     var bs = {
          close: $(".close-btn"),
          searchform: $(".search-form"),
          canvas: $("body"),
          dothis: $('.dosearch')
      };
    
    bs.dothis.on('click', function() {
      $('.search-wrapper').css({ display: "block" });
      bs.searchform.toggleClass('active');
      bs.searchform.find('input').focus();
      bs.canvas.toggleClass('search-overlay');
    });
    
      bs.close.on('click', function() {
        $('.search-wrapper').removeAttr( 'style' );
        bs.searchform.toggleClass('active');
        bs.canvas.removeClass('search-overlay');
    });
  })( jQuery, window );
</script>





</body>
</html>
